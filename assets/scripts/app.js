(()=>{"use strict";class e{constructor(e){this.id=e,this.projectElement=document.getElementById(`${this.id}`)}removeInfoHandler(e){this.projectElement.removeChild(e)}connectDrag(){this.projectElement.addEventListener("dragstart",(e=>{e.dataTransfer.setData("text/plain",this.id),e.dataTransfer.effectAllowed="move"})),this.projectElement.addEventListener("dragend",(e=>{}))}tooltipRenderHandler(){const e=document.createElement("div");e.className="card",e.textContent="Dummy text",e.addEventListener("click",this.removeInfoHandler.bind(this,e));const t=this.projectElement.querySelector("button:first-of-type");e.style.position="fixed",e.style.top=t.offsetTop+t.offsetHeight-this.projectElement.parentNode.scrollTop+"px",e.style.left=t.offsetLeft+"px",this.projectElement.insertAdjacentElement("beforeend",e)}moreInfoHandler(){this.projectElement.querySelector(".card")||this.tooltipRenderHandler()}moreInfoButton(){this.projectElement.querySelector("button:first-of-type").addEventListener("click",this.moreInfoHandler.bind(this))}switchHandler(){const e=this.projectElement.parentNode,t=this.projectElement.querySelector("button:last-of-type"),o=this.projectElement.querySelector(".card");let r;"active-projects"===e.parentNode.id?(r=document.querySelector("#finished-projects ul"),t.textContent="Activate"):(r=document.querySelector("#active-projects ul"),t.textContent="Finish"),r.appendChild(this.projectElement),o?.parentNode.removeChild(o)}switchButton(){const e=this.projectElement.querySelector("button:last-of-type");this.projectElement.parentNode.onscroll=()=>{const e=this.projectElement.parentNode.querySelectorAll("li");for(const t of e){const e=t.querySelector(".card");e?.parentNode.removeChild(e)}},e.addEventListener("click",this.switchHandler.bind(this))}}class t{constructor(t){this.type=t;const o=document.querySelectorAll(`#${this.type}-projects li`);for(const t of o){const o=new e(t.id);o.switchButton(),o.moreInfoButton(),o.connectDrag()}this.connectDroppable()}connectDroppable(){const e=document.querySelector(`#${this.type}-projects ul`);e.addEventListener("dragover",(t=>{"text/plain"===t.dataTransfer.types[0]&&t.preventDefault(),e.parentElement.classList.add("droppable")})),e.addEventListener("dragleave",(t=>{t.relatedTarget.closest&&t.relatedTarget.closest(`#${this.type}-projects ul`)!==e&&e.parentElement.classList.remove("droppable")})),e.addEventListener("drop",(t=>{t.preventDefault();const o=t.dataTransfer.getData("text/plain");let r=t.target.closest(`#${this.type}-projects ul`).querySelectorAll("li");for(const t of r)if(t.id===o)return void e.parentElement.classList.remove("droppable");document.getElementById(o).querySelector("button:last-of-type").click(),e.parentElement.classList.remove("droppable")}))}}(class{static init(){new t("active"),new t("finished")}}).init()})();